{"ast":null,"code":"import _objectSpread from\"/home/www/autoparts/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/www/autoparts/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from\"axios\";import React,{useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function setCookie(name,value,days){var expires=\"\";if(days){var date=new Date();date.setTime(date.getTime()+days*24*60*60*1000);expires=\"; expires=\"+date.toUTCString();}document.cookie=name+\"=\"+(value||\"\")+expires+\"; path=/\";}function getCookie(name){var nameEQ=name+\"=\";var ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' ')c=c.substring(1,c.length);if(c.indexOf(nameEQ)==0)return c.substring(nameEQ.length,c.length);}return null;}var Auth=function Auth(){var isLoggedIn=getCookie(\"sessionId\");if(isLoggedIn!==null)window.location.href=\"/main\";var _useState=useState({userName:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];var authorization=function authorization(){axios.post(\"/users/auth\",formData).then(function(response){response=response.data;if(response.access!==\"danied\"){setCookie(\"sessionId\",response.sessionId);window.location.reload();}}).catch(function(err){alert(err.response.data.message);});};return/*#__PURE__*/_jsx(\"div\",{className:\"auth-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"auth-box\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"title\",children:\"\\u10D0\\u10D5\\u10E2\\u10DD\\u10E0\\u10D8\\u10D6\\u10D0\\u10EA\\u10D8\\u10D0\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-fields\",style:{padding:\"0px 20px\"},children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"model\",children:\"\\u10DB\\u10DD\\u10DB\\u10EE\\u10DB\\u10D0\\u10E0\\u10D4\\u10D1\\u10DA\\u10D8\\u10E1 \\u10E1\\u10D0\\u10EE\\u10D4\\u10DA\\u10D8\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"model\",className:\"modal-form-control\",onChange:function onChange(e){return setFormData(function(prev){return _objectSpread(_objectSpread({},prev),{},{userName:e.target.value});});}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-fields\",style:{padding:\"0px 20px\"},children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"model\",children:\"\\u10DE\\u10D0\\u10E0\\u10DD\\u10DA\\u10D8\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"model\",className:\"modal-form-control\",onChange:function onChange(e){return setFormData(function(prev){return _objectSpread(_objectSpread({},prev),{},{password:e.target.value});});}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"submit-button\",onClick:authorization,children:\"\\u10E8\\u10D4\\u10E1\\u10D5\\u10DA\\u10D0\"})]})});};export default Auth;","map":{"version":3,"names":["axios","React","useState","jsx","_jsx","jsxs","_jsxs","setCookie","name","value","days","expires","date","Date","setTime","getTime","toUTCString","document","cookie","getCookie","nameEQ","ca","split","i","length","c","charAt","substring","indexOf","Auth","isLoggedIn","window","location","href","_useState","userName","password","_useState2","_slicedToArray","formData","setFormData","authorization","post","then","response","data","access","sessionId","reload","catch","err","alert","message","className","children","style","padding","htmlFor","type","id","onChange","e","prev","_objectSpread","target","onClick"],"sources":["/home/www/autoparts/client/src/Components/Auth.js"],"sourcesContent":["import axios from \"axios\";\nimport React, { useState } from \"react\";\n\nfunction setCookie(name,value,days) {\n    var expires = \"\";\n    if (days) {\n        var date = new Date();\n        date.setTime(date.getTime() + (days*24*60*60*1000));\n        expires = \"; expires=\" + date.toUTCString();\n    }\n    document.cookie = name + \"=\" + (value || \"\")  + expires + \"; path=/\";\n}\nfunction getCookie(name) {\n    var nameEQ = name + \"=\";\n    var ca = document.cookie.split(';');\n    for(var i=0;i < ca.length;i++) {\n        var c = ca[i];\n        while (c.charAt(0)==' ') c = c.substring(1,c.length);\n        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);\n    }\n    return null;\n}\n\nconst Auth = () => {\n\n    const isLoggedIn = getCookie(\"sessionId\");\n\n    if(isLoggedIn !== null) window.location.href = \"/main\";\n\n    const [formData, setFormData] = useState({\n        userName: \"\",\n        password: \"\"\n    })\n\n    const authorization = () => {\n        axios.post(\"/users/auth\", formData)\n            .then((response) => {\n                response = response.data;\n                if(response.access !== \"danied\") {\n                    setCookie(\"sessionId\", response.sessionId)\n                    window.location.reload();\n                }\n            })\n            .catch((err) => {\n                alert(err.response.data.message)\n            })\n    }\n\n  return (\n    <div className=\"auth-container\">\n      <div className=\"auth-box\">\n        <h2 className=\"title\">ავტორიზაცია</h2>\n        <div className=\"form-fields\" style={{padding: \"0px 20px\"}}>\n          <label htmlFor=\"model\">მომხმარებლის სახელი</label>\n          <input\n            type=\"text\"\n            id=\"model\"\n            className=\"modal-form-control\"\n            onChange={(e) => setFormData((prev) => {return {...prev, userName: e.target.value}})}\n          />\n        </div>\n        <div className=\"form-fields\" style={{padding: \"0px 20px\"}}>\n          <label htmlFor=\"model\">პაროლი</label>\n          <input\n            type=\"password\"\n            id=\"model\"\n            className=\"modal-form-control\"\n            onChange={(e) => setFormData((prev) => {return {...prev, password: e.target.value}})}\n          />\n        </div>\n        <div className=\"submit-button\" onClick={authorization} >შესვლა</div>\n      </div>\n    </div>\n  );\n};\n\nexport default Auth;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}